<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Registro de Asistencia</title>
  <style>
    body{font-family:Arial, sans-serif;margin:0;padding:20px;background:#f5f5f5;color:#222}
    .container{max-width:1000px;margin:auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,.1)}
    header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
    header img{height:60px}
    h1{text-align:center;font-size:22px;margin:0}
    .info{margin-bottom:20px}
    .info label{display:inline-block;width:140px;font-weight:bold}
    .info input{border:1px solid #ccc;border-radius:4px;padding:5px;margin-bottom:8px;width:200px}
    table{width:100%;border-collapse:collapse;margin-bottom:20px}
    th,td{border:1px solid #ccc;padding:6px;text-align:center;font-size:14px}
    th{background:#eee}
    .total{font-weight:bold}
    .footer{margin-top:40px;display:flex;justify-content:space-between;align-items:flex-end}
    .firma{width:40%;border-top:1px solid #000;text-align:center;padding-top:4px}
    @media print{
      body{background:#fff}
      .container{box-shadow:none}
      header button, .actions{display:none}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <img id="logo" src="Logo Aconcagua solo.png" alt="Logo Clínica del Aconcagua" />
      <h1>REGISTRO DE ASISTENCIA<br>CLÍNICA DEL ACONCAGUA</h1>
      <div></div>
    </header>

    <div class="info">
      <div><label>Nombre y Apellido:</label><input id="employee"/></div>
      <div><label>C.U.I.L.:</label><input id="cuil"/></div>
      <div><label>CBU:</label><input id="cbu"/></div>
      <div><label>Área:</label><input id="area"/></div>
    </div>

    <table>
      <thead>
        <tr>
          <th>Fecha</th>
          <th>Entrada</th>
          <th>Salida</th>
          <th>Horas Día</th>
          <th>Acumulado</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
      <tfoot>
        <tr>
          <td colspan="3" class="total">TOTAL HORAS TRABAJADAS</td>
          <td colspan="2" class="total" id="grandTotal">00:00</td>
        </tr>
      </tfoot>
    </table>

    <div class="footer">
      <div class="firma">Firma del Empleado</div>
    </div>
  </div>

  <script>
    const tbody=document.getElementById('tbody');
    const grandTotal=document.getElementById('grandTotal');
    function pad(n){return String(n).padStart(2,'0');}
    function timeToMinutes(t){if(!t)return 0;let[hh,mm]=t.split(':').map(Number);return hh*60+mm;}
    function minutesToHHMM(min){let h=Math.floor(min/60);let m=min%60;return pad(h)+":"+pad(m);} 
    function diffMinutes(start,end){if(!start||!end)return 0;let s=timeToMinutes(start),e=timeToMinutes(end);if(e<s)e+=24*60;return e-s;}

    function buildTable(){
      const today=new Date();
      const year=today.getFullYear(),month=today.getMonth();
      const days=new Date(year,month+1,0).getDate();
      tbody.innerHTML='';let running=0;
      for(let d=1;d<=days;d++){
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${pad(d)}/${pad(month+1)}/${year}</td>
        <td><input type="time" class="entrada"></td>
        <td><input type="time" class="salida"></td>
        <td class="horas">00:00</td>
        <td class="acumulado">00:00</td>`;
        tbody.appendChild(tr);
        tr.querySelectorAll('input').forEach(inp=>inp.addEventListener('input',()=>recalc()));
      }
    }

    function recalc(){
      let running=0;
      tbody.querySelectorAll('tr').forEach(tr=>{
        const e=tr.querySelector('.entrada').value;
        const s=tr.querySelector('.salida').value;
        const mins=diffMinutes(e,s);
        running+=mins;
        tr.querySelector('.horas').textContent=minutesToHHMM(mins);
        tr.querySelector('.acumulado').textContent=minutesToHHMM(running);
      });
      grandTotal.textContent=minutesToHHMM(running);
    }

    buildTable();
  </script>
</body>
</html>
